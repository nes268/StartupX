# SMTP Configuration Guide

This guide explains each SMTP environment variable and how to obtain/configure them.

## SMTP Variables Explained

### 1. `SMTP_HOST=smtp.gmail.com`

**What it is:**
- The address of the email server that will send your emails
- Think of it as the "post office" address for email

**How to get it:**
- **Gmail**: `smtp.gmail.com` (already correct)
- **Outlook/Hotmail**: `smtp-mail.outlook.com`
- **Yahoo**: `smtp.mail.yahoo.com`
- **Custom email**: Ask your email provider or IT department

**You don't need to change this** - just use `smtp.gmail.com` for Gmail.

---

### 2. `SMTP_PORT=587`

**What it is:**
- The "door number" on the email server
- Port 587 is the standard port for secure email sending (TLS/STARTTLS)
- Alternative: Port 465 (SSL) - but 587 is recommended

**How to get it:**
- **Gmail**: `587` (already correct)
- **Outlook**: `587`
- **Yahoo**: `587` or `465`
- Most modern email providers use `587`

**You don't need to change this** - just use `587`.

---

### 3. `SMTP_USER=your-email@gmail.com`

**What it is:**
- Your Gmail email address
- This is the account that will send the emails
- The email address you use to log into Gmail

**How to get it:**
1. Use your Gmail address (the one you use to log in)
2. Example: `john.doe@gmail.com` or `mycompany@gmail.com`

**Replace `your-email@gmail.com` with your actual Gmail address:**
```env
SMTP_USER=john.doe@gmail.com
```

---

### 4. `SMTP_PASS=your-16-char-app-password`

**What it is:**
- A special password for applications (NOT your regular Gmail password)
- Gmail requires this for security when apps send emails
- It's a 16-character password generated by Google

**How to get it (Step-by-Step):**

#### Step 1: Enable 2-Step Verification
1. Go to [Google Account Settings](https://myaccount.google.com/)
2. Click **Security** (left sidebar)
3. Under "Signing in to Google", find **2-Step Verification**
4. If it's OFF, click it and follow the steps to enable it
   - You'll need your phone number
   - Google will send a verification code

#### Step 2: Generate App Password
1. Still in **Security** settings
2. Look for **App passwords** (under "Signing in to Google")
3. If you don't see it:
   - Make sure 2-Step Verification is enabled first
   - It may take a few minutes to appear after enabling 2FA
4. Click **App passwords**
5. You may need to sign in again
6. Select app: Choose **Mail**
7. Select device: Choose **Other (Custom name)**
8. Enter name: Type something like "CITBIF App" or "Startup Dashboard"
9. Click **Generate**
10. **Copy the 16-character password** (it looks like: `abcd efgh ijkl mnop`)
   - ⚠️ **Important**: You can only see this password once! Copy it immediately.
   - Remove spaces when using it (or keep spaces - both work)

**Replace `your-16-char-app-password` with the generated password:**
```env
SMTP_PASS=abcdefghijklmnop
```
or
```env
SMTP_PASS=abcd efgh ijkl mnop
```

**Example:**
If Google generates: `abcd efgh ijkl mnop`
Use in .env: `SMTP_PASS=abcdefghijklmnop` (spaces removed) OR `SMTP_PASS=abcd efgh ijkl mnop` (with spaces)

---

### 5. `SMTP_FROM=noreply@citbif.com`

**What it is:**
- The "From" email address that appears in the email
- This is what recipients see as the sender
- Can be different from `SMTP_USER`

**How to get it:**
- **Option 1**: Use your Gmail address (same as SMTP_USER)
  ```env
  SMTP_FROM=john.doe@gmail.com
  ```
- **Option 2**: Use a custom "noreply" address (still uses your Gmail to send)
  ```env
  SMTP_FROM=noreply@citbif.com
  ```
  - Note: The email will still be sent FROM your Gmail account
  - Some email clients may show "via gmail.com" or show your actual Gmail address
  - For a true custom domain email, you need to set up email forwarding or use a service like SendGrid

**Recommendation:** Start with your Gmail address:
```env
SMTP_FROM=john.doe@gmail.com
```

---

## Complete Example .env File

Here's what your `server/.env` file should look like:

```env
PORT=5000
MONGODB_URI=mongodb://localhost:27017/citbif

# Email Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=john.doe@gmail.com
SMTP_PASS=abcdefghijklmnop
SMTP_FROM=john.doe@gmail.com
```

**Replace:**
- `john.doe@gmail.com` → Your actual Gmail address
- `abcdefghijklmnop` → Your actual 16-character App Password

---

## Quick Setup Checklist

- [ ] Have a Gmail account
- [ ] Enable 2-Step Verification on Gmail
- [ ] Generate App Password in Google Account settings
- [ ] Copy the 16-character App Password
- [ ] Create/update `server/.env` file with all SMTP variables
- [ ] Restart backend server

---

## Troubleshooting

### "Invalid login credentials" error?
- Make sure you're using App Password, NOT your regular Gmail password
- Verify 2-Step Verification is enabled
- Check that the App Password was copied correctly (no extra spaces)

### "Less secure app access" error?
- Gmail no longer supports "less secure apps"
- You MUST use App Password (not regular password)
- Make sure 2-Step Verification is enabled

### Can't find "App passwords" option?
- Make sure 2-Step Verification is enabled first
- Wait a few minutes after enabling 2FA
- Try refreshing the Google Account page
- Make sure you're signed in to the correct Google account

### Email not sending?
- Check backend console for error messages
- Verify all SMTP variables are correct in `.env`
- Make sure backend server was restarted after changing `.env`
- Test with a simple email first

---

## Security Notes

⚠️ **Important Security Tips:**
1. **Never commit `.env` file to Git** - it contains sensitive passwords
2. **Never share your App Password** - treat it like your regular password
3. **Use different App Passwords** for different applications
4. **Revoke App Passwords** if you suspect they're compromised
5. For production, consider using a dedicated email service (SendGrid, Mailgun, etc.)

---

## Alternative: Testing Without Email

If you don't want to set up email right now, you can test without it:
- Just don't add the SMTP variables to `.env`
- The system will log email content to the console instead
- You can see what emails would be sent without actually sending them

This is perfect for development and testing!


